title: 移动端页面『点击穿透』问题的解决方法
date: 2016-01-07 16:35:26
tags: [H5,HTML5,Mobile,touch,click]
---

对于手机端H5页面存在的『点击穿透』问题，网上已经存在各种五花八门的解决方法，比如[这里](http://www.ayqy.net/blog/%E7%A7%BB%E5%8A%A8%E9%A1%B5%E9%9D%A2%E7%82%B9%E5%87%BB%E7%A9%BF%E9%80%8F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/)。

总的来说，这些方法要么相对烦琐，要么存在兼容问题，在这里，根据[W3C Touch Events文档](http://www.w3.org/TR/touch-events/#h2_mouse-events)，我们可以想到一个相对简单的解决方法：

> 在外层元素中监听冒泡上来的『touchend』事件，并阻止『touchend』事件的默认行为，以防止触发后续的『click』事件。

经测试，在Safari、Chrome、UC、QQ等浏览器下，该方法均能正确运行。

具体示例代码如下：

	<body>
		<div id="main">
			... ...
			<div id="wrapper">
				<span id="button">
					touch me
				</span>
			</div>
			... ...
		</div>
	</body>

	var wrapper = document.getElementById('wrapper');
	var button	= document.getElementById('button');

	button.addEventListener('touchend', function(ev){
		//hide wrapper
		wrapper.style.display = 'none';
	}, false);

	//我们只需要在外层元素监听并阻止touchend事件的默认行为
	wrapper.addEventListener('touchend', function(ev){
		//prevent touchend to avoid trigger click event
		e.preventDefault();
	}, false);

请在手机上[查看demo](/demos/touch-click.html)
