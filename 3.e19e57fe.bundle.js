webpackJsonp([3],{392:function(e,t,a){"use strict";var n,r,s=a(26),i=a.n(s),c=a(8),o=a.n(c),m=a(9),u=a.n(m),l=a(10),p=a.n(l),d=a(11),f=a.n(d),h=a(0),g=a.n(h),v=a(2),b=a.n(v),y=(r=n=function(e){function t(e){o()(this,t);var a=p()(this,(t.__proto__||i()(t)).call(this,e));return document.title=e.title||"加载中...",a}return f()(t,e),u()(t,[{key:"componentDidUpdate",value:function(){document.title=this.props.title||"加载中..."}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.className;return g.a.createElement("div",{className:a},t)}}]),t}(g.a.PureComponent),n.propTypes={className:b.a.string,title:b.a.string.isRequired},r);t.a=y},395:function(e,t,a){"use strict";var n,r,s,i,c,o=a(396),m=(a.n(o),a(398)),u=a.n(m),l=a(118),p=(a.n(l),a(119)),d=a.n(p),f=a(26),h=a.n(f),g=a(8),v=a.n(g),b=a(9),y=a.n(b),x=a(10),k=a.n(x),j=a(11),O=a.n(j),E=a(0),w=a.n(E),N=a(2),C=a.n(N),q=a(44),_=a(77),P=a(25),R=(a.n(P),a(399)),T=a.n(R),Z=(n=Object(q.connect)(),r=Object(P.themr)("widgets/nav-bar",T.a),n(s=r((c=i=function(e){function t(){var e,a,n,r;v()(this,t);for(var s=arguments.length,i=Array(s),c=0;c<s;c++)i[c]=arguments[c];return a=n=k()(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i))),n.handleLeftClick=function(){n.props.dispatch(1===history.length?Object(_.d)("/m"):Object(_.c)())},r=a,k()(n,r)}return O()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.backable,a=e.children,n=e.theme;return w.a.createElement("div",{className:n.wrapper},w.a.createElement(u.a,{mode:"light",className:n.navbar,icon:t?w.a.createElement(d.a,{type:"left"}):null,onLeftClick:this.handleLeftClick},a))}}]),t}(w.a.PureComponent),i.propTypes={backable:C.a.bool.isRequired,children:C.a.node.isRequired},i.defaultProps={backable:!0},s=c))||s)||s);t.a=Z},396:function(e,t,a){"use strict";a(184),a(397)},397:function(e,t){},398:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(31),s=n(r),i=a(8),c=n(i),o=a(9),m=n(o),u=a(10),l=n(u),p=a(11),d=n(p),f=a(24),h=n(f),g=a(0),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(g),b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]]);return a},y=function(e){function t(){return(0,c.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.className,n=e.children,r=e.mode,i=e.icon,c=e.onLeftClick,o=e.leftContent,m=e.rightContent,u=b(e,["prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent"]);return v.createElement("div",(0,s.default)({},u,{className:(0,h.default)(a,t,t+"-"+r)}),v.createElement("div",{className:t+"-left",role:"button",onClick:c},i?v.createElement("span",{className:t+"-left-icon","aria-hidden":"true"},i):null,o),v.createElement("div",{className:t+"-title"},n),v.createElement("div",{className:t+"-right"},m))}}]),t}(v.Component);t.default=y,y.defaultProps={prefixCls:"am-navbar",mode:"dark",onLeftClick:function(){}},e.exports=t.default},399:function(e,t){e.exports={wrapper:"wrapper--1iZjF",navbar:"navbar--3b-Dr"}},402:function(e,t,a){"use strict";var n=a(31),r=a.n(n),s=a(120),i=a.n(s),c=[{id:"xing",nickname:"滕泽秀行",avatar:"//thirdwx.qlogo.cn/mmopen/U8zmWY97mepEZWYMeopibYLIYfbVTqrsYbKzxPHauwlkzPHiagpJpO2jTZGONVJc1oTLkUFP7AJDY0HfKYYlibPCVnwEItB3hfm/132"},{id:"xuan",nickname:"武田信玄",avatar:"//thirdwx.qlogo.cn/mmopen/B6KaxPJVeibfeHnyP33S0rB4azz6PpabH7ACa6Ty29QXsEZ2mffvrj1Z0Fy7RRsoZj0lXjpiaFdyvneVn21hPT0gmpDXvKo4fD/132"},{id:"jiji",nickname:"丰臣秀吉",avatar:"//thirdwx.qlogo.cn/mmopen/KpVDWRgMhZqspHIYCHyD4omxDqr7TeCVg76Mibia4UefBEtDf2b6034cZ7GvfsibNZibV6lhgFoIQ6MuZcx8wr207cnlm9RenA9T/132"},{id:"susu",nickname:"武宫正树",avatar:"//thirdwx.qlogo.cn/mmopen/eRnGTAQNKNka9olzv0CCCuLZ6WcM8nic3nX4ls3cQewMC69fic10sLzvA9net1mic3AyosolVccTas7y1hEquQB1gTiczw62aJpO/132"}];t.a={get:function(e){var t=c.find(function(t){return t.id===e});return i.a.resolve(r()({},t))},list:function(){return i.a.resolve([].concat(c))}}},414:function(e,t){e.exports={friend:"friend--3u1MG",avatar:"avatar--21TXw",nickname:"nickname--1q54K"}},415:function(e,t){e.exports={message:"message--2NaO7",text:"text--3kZUQ"}},416:function(e,t){e.exports={message:"message--1t-V5",inner:"inner--lDPao",image:"image--z83eY"}},417:function(e,t){e.exports={message:"message--3a4eI"}},418:function(e,t){e.exports={message:"message--2RW_g",text:"text--1kKkP"}},419:function(e,t){e.exports={date:"date--2slti"}},420:function(e,t){e.exports={list:"list--2UeM1"}},444:function(e,t,a){"use strict";function n(e){var t,a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=20,a=e.payload.id,n.next=5,Object(C.all)([Object(C.call)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.call)(j.a.get,a);case 2:return t=e.sent,e.next=5,Object(C.put)({type:"friend/byid/append",payload:{friend:t}});case 5:case"end":return e.stop()}},e,this)})),Object(C.call)(k.a.mark(function e(){var n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.call)(N.list,{limit:t});case 2:return n=e.sent,e.next=5,Object(C.put)({type:"pages/chat/message/update",payload:{id:a,messages:n}});case 5:return e.next=7,Object(C.put)({type:"pages/chat/hasmore/update",payload:{hasmore:n.length>=t}});case 7:case"end":return e.stop()}},e,this)}))]);case 5:n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,Object(C.put)({type:"toast/failure",payload:n.t0.message});case 11:case"end":return n.stop()}},q,this,[[0,7]])}function r(e){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},_,this)}function s(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.takeLatest)("pages/chat/init",n);case 2:return e.next=4,Object(C.takeLatest)("pages/chat/more",r);case 4:case"end":return e.stop()}},P,this)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(26),c=a.n(i),o=a(8),m=a.n(o),u=a(9),l=a.n(u),p=a(10),d=a.n(p),f=a(11),h=a.n(f),g=a(0),v=a.n(g),b=a(2),y=a.n(b),x=a(58),k=a.n(x),j=a(402),O=a(120),E=a.n(O),w=[{id:2001,type:"text",text:"武宫正树（1951年1月1日－），日本围棋超一流棋手。日本棋院职业围棋棋手，生于东京，入木谷实门下，与石田芳夫，加藤正夫并称“木谷三羽鸟”。棋风称宇宙流，不惜放弃边角，以中腹为目标，用黑棋时几乎全部用三连星开局，深受业余棋友喜爱。",date:"2019-10-21T08:26:40.197Z"},{id:2002,type:"notice",notice:'"Rhaegar Targaryen" recalled a message',date:"2019-10-21T08:27:40.197Z"},{id:2003,type:"images",images:["https://qcdn.zhangzhongyun.com/covers/1559012014189.jpg?imageView2/0/w/300/q/75","https://qcdn.zhangzhongyun.com/covers/15589405295108.jpg?imageView2/0/w/300/q/75"],date:"2019-10-21T08:28:40.197Z"},{id:2004,type:"link",link:"https://github.com",date:"2019-10-21T09:56:40.197Z"}],N={list:function(){return E.a.resolve([].concat(w))}},C=a(46),q=k.a.mark(n),_=k.a.mark(r),P=k.a.mark(s),R=a(188),T=a.n(R),Z=a(45),M=a.n(Z),Y=a(31),z=a.n(Y),D=a(60),L=a(19),V=Object(D.a)({"pages/chat/hasmore/update":function(e,t){return t.payload.hasmore}},!0),H=Object(D.a)({"pages/chat/message/update":function(e,t){var a=t.payload;return z()({},e,M()({},a.id,a.messages))},"pages/chat/message/append":function(e,t){var a=t.payload,n=e[a.id]||[];return z()({},e,M()({},a.id,[].concat(T()(n),T()(a.messages))))}},{}),K=Object(L.combineReducers)({hasmore:V,message:H}),A=a(395),U=a(392),J=a(185),Q=a(25),B=a(414),F=a.n(B),I=function(e){var t=e.data,a=e.theme;return v.a.createElement("div",{className:a.friend},v.a.createElement("img",{src:t.avatar,className:a.avatar}),v.a.createElement("div",{className:a.nickname},t.nickname))},W=Object(Q.themr)("components/friend",F.a)(I),X=a(415),G=a.n(X),S=v.a.memo(function(e){var t=e.friend,a=e.message,n=e.theme;return v.a.createElement("div",{className:n.message},v.a.createElement(W,{data:t}),v.a.createElement("div",{className:n.text},a.text))}),$=Object(Q.themr)("components/message/text",G.a)(S),ee=a(416),te=a.n(ee),ae=v.a.memo(function(e){var t=e.friend,a=e.message,n=e.theme;return v.a.createElement("div",{className:n.message},v.a.createElement(W,{data:t}),v.a.createElement("div",{className:n.inner},a.images.map(function(e,t){return v.a.createElement("img",{key:t,src:e,className:n.image})})))}),ne=Object(Q.themr)("components/message/images",te.a)(ae),re=a(417),se=a.n(re),ie=v.a.memo(function(e){var t=e.message,a=e.theme;return v.a.createElement("div",{className:a.message},t.notice)}),ce=Object(Q.themr)("components/message/notice",se.a)(ie),oe=a(418),me=a.n(oe),ue=v.a.memo(function(e){var t=e.friend,a=e.theme;return v.a.createElement("div",{className:a.message},v.a.createElement(W,{data:t}),v.a.createElement("div",{className:a.text},"[Unsupport message]"))}),le=Object(Q.themr)("components/message/unsupport",me.a)(ue),pe=a(189),de=a.n(pe),fe=a(419),he=a.n(fe),ge={text:$,images:ne,notice:ce},ve=v.a.memo(function(e){var t=e.friend,a=e.message,n=e.theme,r=ge[a.type]||le,s=v.a.createElement(r,{friend:t,message:a});return v.a.createElement("div",null,v.a.createElement("div",{className:n.date},de()(a.date,"YYYY-MM-DD HH:mm")),s)});ve.propTypes={friend:y.a.PropTypes.shape({id:y.a.string.isRequired,avatar:y.a.string.isRequired,nickname:y.a.string.isRequired}).isRequired,message:y.a.object.isRequired};var be=Object(Q.themr)("components/message",he.a)(ve),ye=a(44),xe=a(32),ke=a(420),je=a.n(ke);a.d(t,"inject",function(){return Pe});var Oe,Ee,we,Ne,Ce,qe=function(e,t){var a=t.match.params.id,n=e["pages/chat"];return{id:a,friend:e.friend.byid[a],messages:n.message[a]||[]}},_e=(Oe=Object(ye.connect)(qe),Ee=Object(Q.themr)("pages/chat",je.a),Oe(we=Ee((Ce=Ne=function(e){function t(){return m()(this,t),d()(this,(t.__proto__||c()(t)).apply(this,arguments))}return h()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"pages/chat/init",payload:{id:this.props.id}})}},{key:"render",value:function(){var e=this.props,t=e.friend,a=e.messages,n=e.theme;return t?v.a.createElement(U.a,{title:t.nickname},v.a.createElement(A.a,null,t.nickname),v.a.createElement("div",{className:n.list},a.map(function(e){return v.a.createElement(be,{key:e.id,friend:t,message:e})}))):v.a.createElement(J.a,null)}}]),t}(v.a.PureComponent),Ne.propTypes={friend:y.a.PropTypes.shape({id:y.a.string.isRequired,avatar:y.a.string.isRequired,nickname:y.a.string.isRequired}),messages:y.a.array.isRequired},we=Ce))||we)||we),Pe=function(e){e.injectSaga("pages/chat",s),e.injectReducer("pages/chat",K)};t.default=Object(xe.withRouter)(_e)}});